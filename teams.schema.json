{
    "$schema": "http://json-schema.org/schema#",
    "type": "object",
    "description": "Teams in an organisation",
    "properties": {
        "organisation": {
            "type": "string",
            "description": "The organisation the teams belong to.",
            "enum": [
                "worms"
            ]
        },
        "teams": {
            "type": "array",
            "items": {
                "$ref": "#/$defs/team"
            }
        }
    },
    "$defs": {
        "teamname_list": {
            "type": "string",
            "description": "The list of team names.",
            "enum": [
                "Team A",
                "Team B",
                "Team C"
            ]
        },
        "external_customer_list": {
            "type": "string",
            "description": "The list of external customers",
            "enum": [
                "Website Customers",
                "Partners"
            ]
        },
        "customer_list": {
            "anyOf": [
                { "$ref": "#/$defs/teamname_list" },
                { "$ref": "#/$defs/external_customer_list" }
              ]
        },
        "team": {
            "type": "object",
            "required": [
                "name",
                "mission",
                "current_work",
                "backlog",
                "members",
                "communications",
                "services"
            ],
            "properties": {
                "name": {
                    "$ref": "#/$defs/teamname_list"
                },
                "mission": {
                    "type": "string",
                    "description": "The mission of the team."
                },
                "current_work": {
                    "type": "array",
                    "description": "The mission of the team.",
                    "items": {
                        "type": "string"
                    },
                    "uniqueItems": true
                },
                "teams_working_with": {
                    "type": "array",
                    "description": "The list of teams this team works with.",
                    "items": {
                        "name": {
                            "$ref": "#/$defs/teamname_list"
                        }
                    },
                    "uniqueItems": true
                },
                "backlog": {
                    "type": "object",
                    "description": "The name and location of the backlog.",
                    "properties": {
                        "name": {
                            "type": "string",
                            "description": "The name of the backlog."
                        },
                        "link": {
                            "type": "string",
                            "description": "The link to the backlog."
                        }
                    }
                },
                "communications": {
                    "type": "array",
                    "description": "The communication methods of the team.",
                    "items": {
                        "$ref": "#/$defs/communication"
                    },
                    "uniqueItems": true
                },
                "members": {
                    "type": "array",
                    "description": "The members of the team.",
                    "items": {
                        "$ref": "#/$defs/member"
                    },
                    "minItems": 4,
                    "maxItems": 8,
                    "uniqueItems": true
                },
                "services": {
                    "type": "array",
                    "description": "The services provided by this team.",
                    "items": {
                        "$ref": "#/$defs/service"
                    }
                },
                "uniqueItems": true
            }
        },
        "member": {
            "type": "object",
            "required": [
                "name",
                "roles",
                "skills"
            ],
            "properties": {
                "name": {
                    "type": "string",
                    "description": "Name of team member"
                },
                "roles": {
                    "type": "array",
                    "description": "Roles team member has",
                    "items": {
                        "type": "string",
                        "enum": [
                            "Product Owner",
                            "Scrum Master",
                            "Technical Lead",
                            "Engineer",
                            "Analyst"
                        ]
                    },
                    "uniqueItems": true
                },
                "skills": {
                    "type": "array",
                    "description": "Skills team member has",
                    "items": {
                        "type": "string",
                        "enum": [
                            "C#",
                            "SQL",
                            "Python",
                            "Data Science",
                            "Front End Development"
                        ]
                    }
                    ,          "uniqueItems": true
                }
            }
        },
        "communication": {
            "type": "object",
            "required": [
                "medium",
                "channels"
            ],
            "properties": {
                "medium": {
                    "type": "string",
                    "description": "Name of medium to comminicate through",
                    "enum": [
                        "Email",
                        "Slack",
                        "Teams"
                    ]
                },
                "channels": {
                    "type": "array",
                    "description": "Channels that can be communicated on through the medium",
                    "uniqueItems": true,
                    "items": {
                        "type": "object",
                        "required": [
                            "name",
                            "link"
                        ],
                        "properties": {
                            "name": {
                                "type": "string",
                                "description": "The name of the channel."
                            },
                            "link": {
                                "type": "string",
                                "description": "The link to the channel."
                            }
                        }
                    }
                }
            }
        },
        "service": {
            "type": "object",
            "required": [
                "name",
                "purpose",
                "sla",
                "customers",
                "codebase"
            ],
            "properties": {
                "name": {
                    "type": "string",
                    "description": "Name of the service provided",
                    "enum": [
                        "Service A",
                        "Service B",
                        "Service C",
                        "Service D"
                    ]
                },
                "purpose": {
                    "type": "string",
                    "description": "The purpose of this service"
                },
                "sla": {
                    "type": "string",
                    "description": "The service level agreement for this service"
                },
                "customers": {
                    "type": "array",
                    "description": "Customers that use this service",
                    "uniqueItems": true,
                    "items": {
                        "$ref": "#/$defs/customer_list"
                    }
                },
                "codebase": {
                    "type": "array",
                    "description": "Codebase that supports this service",
                    "uniqueItems": true,
                    "items": {
                        "type": "object",
                        "required": [
                            "name",
                            "readme"
                        ],
                        "properties": {
                            "name": {
                                "type": "string",
                                "description": "The name of the codebase."
                            },
                            "readme": {
                                "type": "string",
                                "description": "Link to the readme file."
                            }
                        }
                    }
                }
            }
        }
    }
}